from main import text_stat
import pytest

var = {'letter_frequency': {'a': (0.05333333333333334, 0.24), 'c': (0.04666666666666667, 0.2),
                            'd': (0.02666666666666667, 0.16), 'e': (0.16666666666666666, 0.64), 'g': (0.02, 0.12),
                            'i': (0.08666666666666667, 0.44), 'j': (0.006666666666666667, 0.04), 'l': (0.04, 0.2),
                            'm': (0.02666666666666667, 0.16), 'n': (0.08666666666666667, 0.4),
                            'o': (0.04666666666666667, 0.28), 'p': (0.02666666666666667, 0.16),
                            'q': (0.006666666666666667, 0.04), 'r': (0.06666666666666667, 0.36),
                            's': (0.08666666666666667, 0.44), 't': (0.12, 0.6), 'u': (0.07333333333333333, 0.36),
                            'v': (0.013333333333333334, 0.08)}, 'word_amount': 25, 'paragraph_amount': 1,
       'bilingual_word_amount': 0}


@pytest.mark.parametrize("a, expected_result",
                         [(r'..\text_files\text.txt',
                           {'letter_frequency': {'а': (0.08955223880597014, 0.47368421052631576),
                                                 'б': (0.014925373134328358, 0.10526315789473684),
                                                 'в': (0.05223880597014925, 0.3684210526315789),
                                                 'г': (0.007462686567164179, 0.05263157894736842),
                                                 'д': (0.007462686567164179, 0.05263157894736842),
                                                 'е': (0.09701492537313433, 0.5263157894736842),
                                                 'ж': (0.014925373134328358, 0.10526315789473684),
                                                 'з': (0.029850746268656716, 0.21052631578947367),
                                                 'и': (0.11194029850746269, 0.5789473684210527),
                                                 'й': (0.014925373134328358, 0.10526315789473684),
                                                 'к': (0.03731343283582089, 0.2631578947368421),
                                                 'л': (0.014925373134328358, 0.10526315789473684),
                                                 'м': (0.014925373134328358, 0.10526315789473684),
                                                 'н': (0.09701492537313433, 0.47368421052631576),
                                                 'о': (0.07462686567164178, 0.42105263157894735),
                                                 'п': (0.022388059701492536, 0.15789473684210525),
                                                 'р': (0.022388059701492536, 0.15789473684210525),
                                                 'с': (0.05223880597014925, 0.2631578947368421),
                                                 'т': (0.1044776119402985, 0.5263157894736842),
                                                 'у': (0.014925373134328358, 0.10526315789473684),
                                                 'х': (0.007462686567164179, 0.05263157894736842),
                                                 'ц': (0.014925373134328358, 0.10526315789473684),
                                                 'ч': (0.014925373134328358, 0.10526315789473684),
                                                 'ы': (0.03731343283582089, 0.2631578947368421),
                                                 'ь': (0.007462686567164179, 0.05263157894736842),
                                                 'ю': (0.007462686567164179, 0.05263157894736842),
                                                 'я': (0.014925373134328358, 0.10526315789473684)}, 'word_amount': 19,
                            'paragraph_amount': 1,
                            'bilingual_word_amount': 0}),
                          (r'..\text_files\text_a.txt',
                           {'letter_frequency': {'a': (0.05333333333333334, 0.24), 'c': (0.04666666666666667, 0.2),
                                                 'd': (0.02666666666666667, 0.16), 'e': (0.16666666666666666, 0.64),
                                                 'g': (0.02, 0.12),
                                                 'i': (0.08666666666666667, 0.44), 'j': (0.006666666666666667, 0.04),
                                                 'l': (0.04, 0.2),
                                                 'm': (0.02666666666666667, 0.16), 'n': (0.08666666666666667, 0.4),
                                                 'o': (0.04666666666666667, 0.28), 'p': (0.02666666666666667, 0.16),
                                                 'q': (0.006666666666666667, 0.04), 'r': (0.06666666666666667, 0.36),
                                                 's': (0.08666666666666667, 0.44), 't': (0.12, 0.6),
                                                 'u': (0.07333333333333333, 0.36),
                                                 'v': (0.013333333333333334, 0.08)}, 'word_amount': 25,
                            'paragraph_amount': 1,
                            'bilingual_word_amount': 0}),
                          (r'..\text_files\text_b.txt', {
                              'letter_frequency': {'a': (0.044270833333333336, 0.208955223880597),
                                                   'b': (0.0078125, 0.04477611940298507),
                                                   'c': (0.026041666666666668, 0.14925373134328357),
                                                   'd': (0.033854166666666664, 0.19402985074626866),
                                                   'e': (0.07552083333333333, 0.3880597014925373),
                                                   'f': (0.0026041666666666665, 0.014925373134328358),
                                                   'g': (0.015625, 0.08955223880597014),
                                                   'i': (0.07291666666666667, 0.29850746268656714),
                                                   'j': (0.0078125, 0.04477611940298507),
                                                   'l': (0.033854166666666664, 0.19402985074626866),
                                                   'm': (0.026041666666666668, 0.14925373134328357),
                                                   'n': (0.033854166666666664, 0.1791044776119403),
                                                   'o': (0.026041666666666668, 0.11940298507462686),
                                                   'p': (0.018229166666666668, 0.1044776119402985),
                                                   'r': (0.018229166666666668, 0.08955223880597014),
                                                   's': (0.044270833333333336, 0.2537313432835821),
                                                   't': (0.059895833333333336, 0.29850746268656714),
                                                   'u': (0.08072916666666667, 0.34328358208955223),
                                                   'v': (0.015625, 0.08955223880597014),
                                                   'x': (0.0026041666666666665, 0.014925373134328358),
                                                   'а': (0.010416666666666666, 0.04477611940298507),
                                                   'б': (0.005208333333333333, 0.029850746268656716),
                                                   'в': (0.0234375, 0.13432835820895522),
                                                   'г': (0.015625, 0.05970149253731343),
                                                   'е': (0.015625, 0.07462686567164178),
                                                   'з': (0.0026041666666666665, 0.014925373134328358),
                                                   'и': (0.03125, 0.13432835820895522),
                                                   'й': (0.0078125, 0.04477611940298507),
                                                   'к': (0.005208333333333333, 0.029850746268656716),
                                                   'л': (0.010416666666666666, 0.05970149253731343),
                                                   'н': (0.026041666666666668, 0.1044776119402985),
                                                   'о': (0.059895833333333336, 0.23880597014925373),
                                                   'п': (0.010416666666666666, 0.05970149253731343),
                                                   'р': (0.026041666666666668, 0.11940298507462686),
                                                   'с': (0.033854166666666664, 0.14925373134328357),
                                                   'т': (0.03125, 0.13432835820895522),
                                                   'у': (0.0078125, 0.04477611940298507),
                                                   'ц': (0.0026041666666666665, 0.014925373134328358),
                                                   'ч': (0.0026041666666666665, 0.014925373134328358),
                                                   'ш': (0.0026041666666666665, 0.014925373134328358),
                                                   'щ': (0.0026041666666666665, 0.014925373134328358),
                                                   'ы': (0.0078125, 0.04477611940298507),
                                                   'ь': (0.0078125, 0.04477611940298507),
                                                   'ю': (0.0026041666666666665, 0.014925373134328358),
                                                   'я': (0.0026041666666666665, 0.014925373134328358)},
                              'word_amount': 67, 'paragraph_amount': 3, 'bilingual_word_amount': 4}
                           ),
                          (5, {"error": "Некорректное имя файла"}),
                          (r'..\text_files\text_c.txt', {"error": "Некорректное имя "
                                                                  "файла"})])
def test_prime_numbers(a, expected_result):
    assert text_stat(a) == expected_result
